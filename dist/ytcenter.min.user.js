// ==UserScript==
// @id              YouTubeCenter
// @name            YouTube Center
// @namespace       http://www.facebook.com/YouTubeCenter
// @version         3.0.0
// @author          Jeppe Rune Mortensen <jepperm@gmail.com>
// @description     YouTube Center contains all kind of different useful functions which makes your visit on YouTube much more entertaining.
// @icon            https://raw.github.com/YePpHa/YouTubeCenter/master/assets/logo-48x48.png
// @icon64          https://raw.github.com/YePpHa/YouTubeCenter/master/assets/logo-64x64.png
// @domain          yeppha.github.io
// @domain          youtube.com
// @domain          www.youtube.com
// @domain          gdata.youtube.com
// @domain          apis.google.com
// @domain          plus.googleapis.com
// @domain          googleapis.com
// @domain          raw.github.com
// @domain          raw2.github.com
// @domain          s.ytimg.com
// @match           http://*.youtube.com/*
// @match           https://*.youtube.com/*
// @match           https://yeppha.github.io/downloads/YouTubeCenter.meta.js
// @match           http://s.ytimg.com/yts/jsbin/*
// @match           https://s.ytimg.com/yts/jsbin/*
// @match           https://raw.github.com/YePpHa/YouTubeCenter/master/*
// @match           http://apis.google.com/*/widget/render/comments?*
// @match           https://apis.google.com/*/widget/render/comments?*
// @match           http://plus.googleapis.com/*/widget/render/comments?*
// @match           https://plus.googleapis.com/*/widget/render/comments?*
// @include         http://*.youtube.com/*
// @include         https://*.youtube.com/*
// @include         http://apis.google.com/*/widget/render/comments?*
// @include         https://apis.google.com/*/widget/render/comments?*
// @include         http://plus.googleapis.com/*/widget/render/comments?*
// @include         https://plus.googleapis.com/*/widget/render/comments?*
// @exclude         http://apiblog.youtube.com/*
// @exclude         https://apiblog.youtube.com/*
// @exclude         http://*.youtube.com/subscribe_embed?*
// @exclude         https://*.youtube.com/subscribe_embed?*
// @grant           GM_getValue
// @grant           GM_setValue
// @grant           GM_deleteValue
// @grant           GM_xmlhttpRequest
// @grant           GM_log
// @grant           GM_registerMenuCommand
// @grant           unsafeWindow
// @updateURL       https://github.com/YePpHa/YouTubeCenter/raw/master/dist/YouTubeCenter.meta.js
// @downloadURL     https://github.com/YePpHa/YouTubeCenter/raw/master/dist/YouTubeCenter.user.js
// @updateVersion   1
// @run-at          document-start
// @priority        9001
// @contributionURL https://github.com/YePpHa/YouTubeCenter/wiki/Donate
// ==/UserScript==


!function(){function a(a,b){!function(){var c,d,e;!function(a){function b(a,b){return u.call(a,b)}function f(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=b&&b.split("/"),o=s.map,p=o&&o["*"]||{};if(a&&"."===a.charAt(0))if(b){for(n=n.slice(0,n.length-1),a=a.split("/"),g=a.length-1,s.nodeIdCompat&&w.test(a[g])&&(a[g]=a[g].replace(w,"")),a=n.concat(a),k=0;k<a.length;k+=1)if(m=a[k],"."===m)a.splice(k,1),k-=1;else if(".."===m){if(1===k&&(".."===a[2]||".."===a[0]))break;k>0&&(a.splice(k-1,2),k-=2)}a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((n||p)&&o){for(c=a.split("/"),k=c.length;k>0;k-=1){if(d=c.slice(0,k).join("/"),n)for(l=n.length;l>0;l-=1)if(e=o[n.slice(0,l).join("/")],e&&(e=e[d])){f=e,h=k;break}if(f)break;!i&&p&&p[d]&&(i=p[d],j=k)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join("/"))}return a}function g(b,c){return function(){return n.apply(a,v.call(arguments,0).concat([b,c]))}}function h(a){return function(b){return f(b,a)}}function i(a){return function(b){q[a]=b}}function j(c){if(b(r,c)){var d=r[c];delete r[c],t[c]=!0,m.apply(a,d)}if(!b(q,c)&&!b(t,c))throw new Error("No "+c);return q[c]}function k(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function l(a){return function(){return s&&s.config&&s.config[a]||{}}}var m,n,o,p,q={},r={},s={},t={},u=Object.prototype.hasOwnProperty,v=[].slice,w=/\.js$/;o=function(a,b){var c,d=k(a),e=d[0];return a=d[1],e&&(e=f(e,b),c=j(e)),e?a=c&&c.normalize?c.normalize(a,h(b)):f(a,b):(a=f(a,b),d=k(a),e=d[0],a=d[1],e&&(c=j(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},p={require:function(a){return g(a)},exports:function(a){var b=q[a];return"undefined"!=typeof b?b:q[a]={}},module:function(a){return{id:a,uri:"",exports:q[a],config:l(a)}}},m=function(c,d,e,f){var h,k,l,m,n,s,u=[],v=typeof e;if(f=f||c,"undefined"===v||"function"===v){for(d=!d.length&&e.length?["require","exports","module"]:d,n=0;n<d.length;n+=1)if(m=o(d[n],f),k=m.f,"require"===k)u[n]=p.require(c);else if("exports"===k)u[n]=p.exports(c),s=!0;else if("module"===k)h=u[n]=p.module(c);else if(b(q,k)||b(r,k)||b(t,k))u[n]=j(k);else{if(!m.p)throw new Error(c+" missing "+k);m.p.load(m.n,g(f,!0),i(k),{}),u[n]=q[k]}l=e?e.apply(q[c],u):void 0,c&&(h&&h.exports!==a&&h.exports!==q[c]?q[c]=h.exports:l===a&&s||(q[c]=l))}else c&&(q[c]=e)},c=d=n=function(b,c,d,e,f){if("string"==typeof b)return p[b]?p[b](c):j(o(b,c).f);if(!b.splice){if(s=b,s.deps&&n(s.deps,s.callback),!c)return;c.splice?(b=c,c=d,d=null):b=a}return c=c||function(){},"function"==typeof d&&(d=e,e=f),e?m(a,b,c,d):setTimeout(function(){m(a,b,c,d)},4),n},n.config=function(a){return n(a)},c._defined=q,e=function(a,c,d){c.splice||(d=c,c=[]),b(q,a)||b(r,a)||(r[a]=[a,c,d])},e.amd={jQuery:!0}}(),e("../vendor/almond",function(){}),e("unsafeWindow",[],function(){return window}),e("support",["unsafeWindow"],function(a){function b(){var a="support.test";try{return localStorage.setItem(a,a),localStorage.removeItem(a),!0}catch(b){return!1}}var c="object"==typeof a.webkitURL,d="object"==typeof a.URL,e=!1,f=!1,g=window&&window.external&&window.external.mxGetRuntime&&"function"==typeof window.external.mxGetRuntime;return c?(e="function"==typeof a.webkitURL.createObjectURL,f="function"==typeof a.webkitURL.revokeObjectURL):d&&(e="function"==typeof a.URL.createObjectURL,f="function"==typeof a.URL.revokeObjectURL),{localStorage:b(),Greasemonkey:"undefined"!=typeof GM_setValue&&("undefined"==typeof GM_setValue.toString||-1===GM_setValue.toString().indexOf("not supported")),createObjectURL:e,revokeObjectURL:f,webkitURL:c,URL:d,maxthonRuntime:g,maxthonRuntimeStorage:g&&window.external.mxGetRuntime()&&window.external.mxGetRuntime().storage,firefoxPort:this.port&&"function"==typeof this.port.request&&this.port.storage&&"function"==typeof this.port.on}}),e("utils",["support","unsafeWindow"],function(a,b){function c(a,b){if(d(a))for(var c=0;c<a.length&&b(c,a[c])!==!0;c++);else for(var e in a)if(a.hasOwnProperty(e)&&b(e,a[e])===!0)break}function d(a){return"[object Array]"===Object.prototype.toString.call(a)}function e(a,b){return setTimeout(f.apply(null,[a,b].concat(Array.prototype.slice.call(arguments,2))),0)}function f(a,b){var c=Array.prototype.slice.call(arguments,2);return function(){return b.apply(a,c.concat(Array.prototype.slice.call(arguments)))}}function g(a){return a.replace(/^\s+/,"")}function h(a){return a.replace(/\s+$/,"")}function i(a,b,c){for(var d=0,e=a.length,f=[];e>d;d++)d in a&&(f[d]=b.call(c,a[d]));return f}function j(a,b,c,d){return"object"!=typeof a&&(a={}),K||"function"==typeof Object.defineProperty?(Object.defineProperty(a,b,{get:d,set:c}),a):(a.__defineGetter__(b,d),a.__defineSetter__(b,c),a)}function k(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d||!1):a.attachEvent&&a.attachEvent("on"+b,c)}function l(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d||!1):a.detachEvent&&a.detachEvent("on"+b,c)}function m(a,b,c,d,e){c=c?";domain="+encodeURIComponent(c):"",d=d?";path="+encodeURIComponent(d):"",e=0>e?"":0==e?";expires="+new Date(1970,1,1).toUTCString():";expires="+new Date(L()+1e3*e).toUTCString(),document.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+c+d+e}function n(a){return o()[a]}function o(){var a=document.cookie,b=0,c={};return document.cookie.match(/^\s*\$Version=(?:"1"|1);\s*(.*)/)&&(a=RegExp.$1,b=1),0===b?i(a.split(/[,;]/),function(a){var b=a.split(/=/,2),d=decodeURIComponent(g(b[0])),e=b.length>1?decodeURIComponent(h(b[1])):null;c[d]=e}):i(a.match(/(?:^|\s+)([!#$%&'*+\-.0-9A-Z^`a-z|~]+)=([!#$%&'*+\-.0-9A-Z^`a-z|~]*|"(?:[\x20-\x7E\x80\xFF]|\\[\x00-\x7F])*")(?=\s*[,;]|$)/g),function(a,b){var d=a,e='"'===b.charAt(0)?b.substr(1,-1).replace(/\\(.)/g,"$1"):b;c[d]=e}),c}function p(a,b){return-1!==a.indexOf(b,a.length-b.length)}function q(a){var b=document.createElement("script"),c=document.body||document.head||document.documentElement;if(!c)throw"Could not inject!!!";b.setAttribute("type","text/javascript"),b.appendChild(document.createTextNode("("+a+")("+r.apply(null,[!1].concat(Array.prototype.slice.call(arguments,1)))+");")),c.appendChild(b),c.removeChild(b)}function r(a){for(var b=[],c=Array.prototype.slice.call(arguments,1),d=0,e=c.length;e>d;d++)b.push("string"==typeof c[d]?'"'+c[d].replace(/\\/,"\\\\").replace(/"/g,'\\"')+'"':"object"==typeof c[d]?JSON.stringify(c[d]):c[d]);return a?"("+b.join(",")+")":b.join(",")}function s(a){try{JSON.parse(a)}catch(b){return!1}return!0}function t(a){var b;if("undefined"!=typeof XMLHttpRequest)b=new XMLHttpRequest;else{if("undefined"==typeof opera||"undefined"==typeof opera.XMLHttpRequest)return void(a.onerror&&a.onerror());b=new opera.XMLHttpRequest}b.onreadystatechange=function(){var c={responseXML:4==b.readyState?b.responseXML:"",responseText:4==b.readyState?b.responseText:"",readyState:b.readyState,responseHeaders:4==b.readyState?b.getAllResponseHeaders():"",status:4==b.readyState?b.status:0,statusText:4==b.readyState?b.statusText:"",finalUrl:4==b.readyState?b.finalUrl:""};a.onreadystatechange&&a.onreadystatechange(c),4==b.readyState&&(a.onload&&b.status>=200&&b.status<300&&a.onload(c),a.onerror&&(b.status<200||b.status>=300)&&a.onerror(c))};try{b.open(a.method,a.url)}catch(c){return void(a.onerror&&a.onerror({responseXML:"",responseText:"",readyState:4,responseHeaders:"",status:403,statusText:"Forbidden"}))}if(a.headers)for(var d in a.headers)b.setRequestHeader(d,a.headers[d]);b.send("undefined"!=typeof a.data?a.data:null)}function u(a,b,c,d){for(key in a)if(a.hasOwnProperty(key))if("obj"==typeof a[key])u(a[key]);else if("string"==typeof a[key]&&0===a[key].indexOf("@/(message.callback)/")){var e=a[key].split("@/(message.callback)/")[1];a[key]=f(null,b,e,c,d)}}function v(a,b,c){if("object"!=typeof a)throw new TypeError("Unsupported type for obj.");if("object"!=typeof b)throw new TypeError("Unsupported type for defaults.");for(var d in b)b.hasOwnProperty(d)&&("object"==typeof a[d]&&"object"==typeof b[d]&&c?v(a[d],b[d],c):a.hasOwnProperty(d)||(a[d]=b[d]));return a}function w(a,b){for(var c=0,d=b.length;d>c;c++)if(b[c]===a)return!0;return!1}function x(a){return a&&a.className?a.className.split(" "):[]}function y(a,b){for(var c=x(a),d=b.split(" "),e=0,f=d.length;f>e;e++)w(d[e],c)||(a.className+=" "+d[e]);return a.className}function z(a,b){for(var c=x(a),d=b.split(" "),e=[],f=0,g=c.length;g>f;f++)w(c[f],d)||e.push(c[f]);return a.className=e.join(" ")}function A(a,b){return w(b,x(a))}function B(a,b,c){function d(){i=c.leading===!1?0:new Date,h=null,g=a.apply(e,f)}var e,f,g,h=null,i=0;return c=c||{},function(){var j,k=new Date;return e=this,f=arguments,i||c.leading!==!1||(i=k),j=b-(k-i),0>=j?(clearTimeout(h),h=null,i=k,g=a.apply(e,f)):h||c.trailing===!1||(h=setTimeout(d,j)),g}}function C(a){return JSON.parse(JSON.stringify(a))}function D(a){for(var b=[],c=0,d=a.length;d>c;c++)w(b,a[c])||b.push(a[c]);return b}function E(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function F(a,b){b=b||"text/plain";for(var c=512,d=a.length,e=Math.ceil(d/c),f=new Array(e),g=0;e>g;++g){for(var h=g*c,i=Math.min(h+c,d),j=new Array(i-h),k=h,l=0;i>k;++l,++k)j[l]=a[k].charCodeAt(0);f[g]=new Uint8Array(j)}return new Blob(f,{type:b})}function G(c){if(a.createObjectURL)return a.webkitURL?b.webkitURL.createObjectURL(c):b.URL.createObjectURL(c);throw"createObjectURL is not supported by the browser!"}function H(c){if(a.revokeObjectURL)return a.webkitURL?b.webkitURL.revokeObjectURL(c):b.URL.revokeObjectURL(c);throw"revokeObjectURL is not supported by the browser!"}function I(a,b){return Math.floor(Math.random()*(b-a))+a}function J(a,b){"string"!=typeof a&&(a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-_"),"number"!=typeof b&&(b=64);for(var c=a.length,d="",e=0;b>e;e++)d+=a[I(0,c)];return d}var K=function(){for(var a=3,b=document.createElement("b"),c=b.all||[];b.innerHTML="<!--[if gt IE "+ ++a+"]><i><![endif]-->",c[0];);return a>4?a:!!document.documentMode}(),L=Date.now||function(){return+new Date};return{hasClass:A,removeClass:z,addClass:y,each:c,isArray:d,inArray:w,bind:f,asyncCall:e,defineLockedProperty:j,ie:K,addEventListener:k,removeEventListener:l,now:L,trimLeft:g,trimRight:h,map:i,setCookie:m,getCookie:n,getCookies:o,endsWith:p,inject:q,isJSONString:s,xhr:t,buildArgumentList:r,bindFunctionCallbacks:u,extend:v,throttle:B,clone:C,removeDuplicates:D,escapeRegExp:E,toBlob:F,createObjectURL:G,revokeObjectURL:H,generateToken:J}}),e("console",["utils"],function(a){function b(){return f?console.log.bind(console,"injected["+e+"]"):function(){}}function c(){return f?console.error.bind(console,"injected["+e+"]"):function(){}}function d(){return f?console.warn.bind(console,"injected["+e+"]"):function(){}}var e=a.generateToken(null,8),f=!0,g={};return a.defineLockedProperty(g,"log",function(){},b),a.defineLockedProperty(g,"error",function(){},c),a.defineLockedProperty(g,"warn",function(){},d),g}),e("UserProxy/support",[],function(){function a(){try{var a=document.createEvent("CustomEvent");return a&&"function"==typeof a.initCustomEvent?(a.initCustomEvent(b,!0,!0,{mod:b}),!0):!1}catch(a){return!1}}var b="support.test";return{CustomEvent:a}}),e("UserProxy/utils",[],function(){function a(a,b){var c=Array.prototype.slice.call(arguments,2);return function(){return b.apply(a,c.concat(Array.prototype.slice.call(arguments)))}}function b(a,b){if(d(a))for(var c=0;c<a.length&&b(c,a[c])!==!0;c++);else for(var e in a)if(a.hasOwnProperty(e)&&b(e,a[e])===!0)break}function c(a){var c=[];return b(a,function(a){c.push(a)}),c}function d(a){return"[object Array]"===Object.prototype.toString.call(a)}function e(a,b){for(var c=0,d=b.length;d>c;c++)if(b[c]===a)return!0;return!1}function f(a,b){for(var c=0,d=b.length;d>c;c++)if(b[c]===a)return c;return-1}function g(a,b){return d(a,b)?f(a,b):void 0}function h(a,b){return Math.random()*(b-a)+a}function i(a,b){return Math.floor(Math.random()*(b-a))+a}function j(a,b){"string"!=typeof a&&(a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-_"),"number"!=typeof b&&(b=64);for(var c=a.length,d="",e=0;b>e;e++)d+=a[i(0,c)];return d}function k(a,b){for(a=a.replace(/[^0-9a-zA-Z_\$]/g,"");/$[0-9]/g.test(a);){if(""===a)return b;a=a.substring(1)}return a}function l(a){for(var b=[],c=Array.prototype.slice.call(arguments,1),d=0,e=c.length;e>d;d++)b.push("string"==typeof c[d]?'"'+c[d].replace(/\\/,"\\\\").replace(/"/g,'\\"')+'"':"object"==typeof c[d]?JSON.stringify(c[d]):c[d]);return a?"("+b.join(",")+")":b.join(",")}return{bind:a,each:b,getKeys:c,isArray:d,inArray:e,indexOf:g,indexOfArray:f,getRandomArbitrary:h,getRandomInt:i,generateToken:j,escapeECMAVariable:k,buildArgumentList:l}}),e("UserProxy/CustomEvent",["./utils"],function(a){function b(b,c){g[b]||(g[b]=[],h[b]=a.bind(null,d,b,g[b]),window.addEventListener(b,h[b],!1)),g[b].push(c)}function c(a,b){if(a in g){for(var c=0,d=g[a].length;d>c;c++)g[a][c]===b&&(g[a].splice(c,1),c--,d--);0===g[a].length&&(window.removeEventListener(a,h[a],!1),g[a]=null,h[a]=null)}}function d(a,b,c){c=c||window.event;var d=JSON.parse(c.detail);if("object"==typeof d.detail&&d.token!==f){for(var e=d.detail,g=0,h=b.length;h>g;g++)b[g](e);c&&"function"==typeof c.stopPropagation&&c.stopPropagation()}}function e(a,b){var c=document.createEvent("CustomEvent");c.initCustomEvent(a,!0,!0,JSON.stringify({detail:b,token:f})),document.documentElement.dispatchEvent(c)}var f=a.generateToken(),g={},h={};return{addEventListener:b,removeEventListener:c,fireEvent:e}}),e("UserProxy/Message",["./utils"],function(a){function b(b,c){e(),h[b]||(h[b]=[]);var d=a.bind(null,c,b);h[b].push(d)}function c(a,b){window.postMessage(JSON.stringify({token:g,event:a,detail:b}),"*")}function d(b){b=b||window.event;var c=JSON.parse(b.data);if("string"==typeof c.event&&"object"==typeof c.detail&&c.token!==g&&a.isArray(h[c.event])){for(var d=h[c.event],e=c.detail,f=0,i=d.length;i>f;f++)d(e);b&&"function"==typeof b.stopPropagation&&b.stopPropagation()}}function e(){f||window.addEventListener("message",d,!1)}var f=!1,g=a.generateToken(),h={};return{addEventListener:b,fireEvent:c}}),e("UserProxy/memFunction",["./utils","./CustomEvent","./Message","./support"],function(a,b,c,d){function e(b,c,d){if("object"==typeof b)a.each(b,function(a,g){if("object"==typeof g)b[a]=e(g,c,d);else if("string"==typeof g)b[a]=f(g);else if("function"==typeof g){var h=k.push(g)-1;b[a]="${"+c+"/"+d+"/"+h+"}"}});else if("string"==typeof value)b=f(b);else if("function"==typeof b){var g=k.push(b)-1;b="${"+c+"/"+d+"/"+g+"}"}return b}function f(a){return/^\$[\\]*\{([0-9a-zA-Z\.\-_\/\\]+)\}$/g.test(a)?"$\\"+a.substring(1):a}function g(b,c,d){if(/^\$\{([0-9a-zA-Z\.\-_]+)\/([0-9a-zA-Z\.\-_]+)\/([0-9]+)\}$/g.test(b)){var e=b.substring(2,b.length-1).split("/"),f=parseInt(e[2],10);return e[0]===c&&e[1]===d?k[f]:a.bind(null,i,e[0]+"-"+e[1],f)}return/^\$[\\]+\{([0-9a-zA-Z\.\-_\/\\]+)\}$/g.test(b)?"$"+b.substring(2):b}function h(b,c,d){if("object"==typeof b)a.each(b,function(a,e){if("object"==typeof e)b[a]=h(e,c,d);else if("string"==typeof e)b[a]=g(e,c,d);else if("function"==typeof e)throw Error("Function was found!")});else{if("string"==typeof value)return g(value,c,d);if("function"==typeof value)throw Error("Function was found!")}return b}function i(a,e){var f=Array.prototype.slice.call(arguments,2);return d.CustomEvent?b.fireEvent(a,{callbackId:e,args:f,mem:!0}):c.fireEvent(a,{callbackId:e,args:f,mem:!0})}function j(a){return k[a]}var k=[];return{parseObject:e,restoreObject:h,getCacheFunction:j}}),e("UserProxy/proxy",["./support","./CustomEvent","./Message","./utils","./memFunction"],function(c,d,e,f,g){function h(a){if("number"==typeof a.callbackId&&f.isArray(a.args)&&a.mem){var b=g.restoreObject(a.args,n,"page"),c=g.getCacheFunction(a.callbackId);"function"==typeof c&&c.apply(null,b)}else{if("number"!=typeof a.callbackId||!f.isArray(a.args))throw Error("Malformed detail!",a);var b=g.restoreObject(a.args,n,"page");"function"==typeof p[a.callbackId]&&p[a.callbackId].apply(null,b)}}function i(a,b){if(!k(a))throw Error(a+" is not a defined function!");if("function"!=typeof b)throw Error("The callback is not a function!");var f=p.push(b)-1,h=Array.prototype.slice.call(arguments,2);return function(){h=h.concat(Array.prototype.slice.call(arguments,0)),h=g.parseObject(h,n,"page");var b={method:a,args:h,id:f};c.CustomEvent?d.fireEvent(n+"-content",b):e.fireEvent(n+"-content",b)}}function j(a,b){function f(a){clearTimeout(j),"function"==typeof a&&(i.id=p.push(a)-1),h()}function h(){c.CustomEvent?d.fireEvent(n+"-content",i):e.fireEvent(n+"-content",i)}if(b=Array.prototype.slice.call(arguments,1),!k(a))throw Error(a+" is not a defined function!");b=g.parseObject(b,n,"page");var i={method:a,args:b},j=setTimeout(h,4);return{then:f}}function k(a){return-1!==f.indexOfArray(a,o)}function l(a){if(k(a))return f.bind(null,j,a);throw Error(a+" is not defined!")}function m(){return JSON.parse(JSON.stringify(o))}var n=a,o=b,p=[];return c.CustomEvent?d.addEventListener(n+"-page",h):e.addEventListener(n+"-page",h),{call:j,prepareCall:i,getFunction:l,isDefined:k,listFunctions:m}}),e("xhr/injected",["utils","UserProxy/proxy"],function(a,b){return a.bind(null,b.call,"xhr")}),e("xhr",["xhr/injected"],function(a){return a}),e("main",["console","utils","xhr"],function(){}),d(["main"])}()}!function(){var b,c,d;!function(a){function e(a,b){return u.call(a,b)}function f(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=b&&b.split("/"),o=s.map,p=o&&o["*"]||{};if(a&&"."===a.charAt(0))if(b){for(n=n.slice(0,n.length-1),a=a.split("/"),g=a.length-1,s.nodeIdCompat&&w.test(a[g])&&(a[g]=a[g].replace(w,"")),a=n.concat(a),k=0;k<a.length;k+=1)if(m=a[k],"."===m)a.splice(k,1),k-=1;else if(".."===m){if(1===k&&(".."===a[2]||".."===a[0]))break;k>0&&(a.splice(k-1,2),k-=2)}a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((n||p)&&o){for(c=a.split("/"),k=c.length;k>0;k-=1){if(d=c.slice(0,k).join("/"),n)for(l=n.length;l>0;l-=1)if(e=o[n.slice(0,l).join("/")],e&&(e=e[d])){f=e,h=k;break}if(f)break;!i&&p&&p[d]&&(i=p[d],j=k)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join("/"))}return a}function g(b,c){return function(){return n.apply(a,v.call(arguments,0).concat([b,c]))}}function h(a){return function(b){return f(b,a)}}function i(a){return function(b){q[a]=b}}function j(b){if(e(r,b)){var c=r[b];delete r[b],t[b]=!0,m.apply(a,c)}if(!e(q,b)&&!e(t,b))throw new Error("No "+b);return q[b]}function k(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function l(a){return function(){return s&&s.config&&s.config[a]||{}}}var m,n,o,p,q={},r={},s={},t={},u=Object.prototype.hasOwnProperty,v=[].slice,w=/\.js$/;o=function(a,b){var c,d=k(a),e=d[0];return a=d[1],e&&(e=f(e,b),c=j(e)),e?a=c&&c.normalize?c.normalize(a,h(b)):f(a,b):(a=f(a,b),d=k(a),e=d[0],a=d[1],e&&(c=j(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},p={require:function(a){return g(a)},exports:function(a){var b=q[a];return"undefined"!=typeof b?b:q[a]={}},module:function(a){return{id:a,uri:"",exports:q[a],config:l(a)}}},m=function(b,c,d,f){var h,k,l,m,n,s,u=[],v=typeof d;if(f=f||b,"undefined"===v||"function"===v){for(c=!c.length&&d.length?["require","exports","module"]:c,n=0;n<c.length;n+=1)if(m=o(c[n],f),k=m.f,"require"===k)u[n]=p.require(b);else if("exports"===k)u[n]=p.exports(b),s=!0;else if("module"===k)h=u[n]=p.module(b);else if(e(q,k)||e(r,k)||e(t,k))u[n]=j(k);else{if(!m.p)throw new Error(b+" missing "+k);m.p.load(m.n,g(f,!0),i(k),{}),u[n]=q[k]}l=d?d.apply(q[b],u):void 0,b&&(h&&h.exports!==a&&h.exports!==q[b]?q[b]=h.exports:l===a&&s||(q[b]=l))}else b&&(q[b]=d)},b=c=n=function(b,c,d,e,f){if("string"==typeof b)return p[b]?p[b](c):j(o(b,c).f);if(!b.splice){if(s=b,s.deps&&n(s.deps,s.callback),!c)return;c.splice?(b=c,c=d,d=null):b=a}return c=c||function(){},"function"==typeof d&&(d=e,e=f),e?m(a,b,c,d):setTimeout(function(){m(a,b,c,d)},4),n},n.config=function(a){return n(a)},b._defined=q,d=function(a,b,c){b.splice||(c=b,b=[]),e(q,a)||e(r,a)||(r[a]=[a,b,c])},d.amd={jQuery:!0}}(),d("../vendor/almond",function(){}),d("unsafeWindow",[],function(){return window}),d("support",["unsafeWindow"],function(a){function b(){var a="support.test";try{return localStorage.setItem(a,a),localStorage.removeItem(a),!0}catch(b){return!1}}var c="object"==typeof a.webkitURL,d="object"==typeof a.URL,e=!1,f=!1,g=window&&window.external&&window.external.mxGetRuntime&&"function"==typeof window.external.mxGetRuntime;return c?(e="function"==typeof a.webkitURL.createObjectURL,f="function"==typeof a.webkitURL.revokeObjectURL):d&&(e="function"==typeof a.URL.createObjectURL,f="function"==typeof a.URL.revokeObjectURL),{localStorage:b(),Greasemonkey:"undefined"!=typeof GM_setValue&&("undefined"==typeof GM_setValue.toString||-1===GM_setValue.toString().indexOf("not supported")),createObjectURL:e,revokeObjectURL:f,webkitURL:c,URL:d,maxthonRuntime:g,maxthonRuntimeStorage:g&&window.external.mxGetRuntime()&&window.external.mxGetRuntime().storage,firefoxPort:this.port&&"function"==typeof this.port.request&&this.port.storage&&"function"==typeof this.port.on}}),d("utils",["support","unsafeWindow"],function(a,b){function c(a,b){if(d(a))for(var c=0;c<a.length&&b(c,a[c])!==!0;c++);else for(var e in a)if(a.hasOwnProperty(e)&&b(e,a[e])===!0)break}function d(a){return"[object Array]"===Object.prototype.toString.call(a)}function e(a,b){return setTimeout(f.apply(null,[a,b].concat(Array.prototype.slice.call(arguments,2))),0)}function f(a,b){var c=Array.prototype.slice.call(arguments,2);return function(){return b.apply(a,c.concat(Array.prototype.slice.call(arguments)))}}function g(a){return a.replace(/^\s+/,"")}function h(a){return a.replace(/\s+$/,"")}function i(a,b,c){for(var d=0,e=a.length,f=[];e>d;d++)d in a&&(f[d]=b.call(c,a[d]));return f}function j(a,b,c,d){return"object"!=typeof a&&(a={}),K||"function"==typeof Object.defineProperty?(Object.defineProperty(a,b,{get:d,set:c}),a):(a.__defineGetter__(b,d),a.__defineSetter__(b,c),a)}function k(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d||!1):a.attachEvent&&a.attachEvent("on"+b,c)}function l(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d||!1):a.detachEvent&&a.detachEvent("on"+b,c)}function m(a,b,c,d,e){c=c?";domain="+encodeURIComponent(c):"",d=d?";path="+encodeURIComponent(d):"",e=0>e?"":0==e?";expires="+new Date(1970,1,1).toUTCString():";expires="+new Date(L()+1e3*e).toUTCString(),document.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+c+d+e}function n(a){return o()[a]}function o(){var a=document.cookie,b=0,c={};return document.cookie.match(/^\s*\$Version=(?:"1"|1);\s*(.*)/)&&(a=RegExp.$1,b=1),0===b?i(a.split(/[,;]/),function(a){var b=a.split(/=/,2),d=decodeURIComponent(g(b[0])),e=b.length>1?decodeURIComponent(h(b[1])):null;c[d]=e}):i(a.match(/(?:^|\s+)([!#$%&'*+\-.0-9A-Z^`a-z|~]+)=([!#$%&'*+\-.0-9A-Z^`a-z|~]*|"(?:[\x20-\x7E\x80\xFF]|\\[\x00-\x7F])*")(?=\s*[,;]|$)/g),function(a,b){var d=a,e='"'===b.charAt(0)?b.substr(1,-1).replace(/\\(.)/g,"$1"):b;c[d]=e}),c}function p(a,b){return-1!==a.indexOf(b,a.length-b.length)}function q(a){var b=document.createElement("script"),c=document.body||document.head||document.documentElement;if(!c)throw"Could not inject!!!";b.setAttribute("type","text/javascript"),b.appendChild(document.createTextNode("("+a+")("+r.apply(null,[!1].concat(Array.prototype.slice.call(arguments,1)))+");")),c.appendChild(b),c.removeChild(b)}function r(a){for(var b=[],c=Array.prototype.slice.call(arguments,1),d=0,e=c.length;e>d;d++)b.push("string"==typeof c[d]?'"'+c[d].replace(/\\/,"\\\\").replace(/"/g,'\\"')+'"':"object"==typeof c[d]?JSON.stringify(c[d]):c[d]);return a?"("+b.join(",")+")":b.join(",")}function s(a){try{JSON.parse(a)}catch(b){return!1}return!0}function t(a){var b;if("undefined"!=typeof XMLHttpRequest)b=new XMLHttpRequest;else{if("undefined"==typeof opera||"undefined"==typeof opera.XMLHttpRequest)return void(a.onerror&&a.onerror());b=new opera.XMLHttpRequest}b.onreadystatechange=function(){var c={responseXML:4==b.readyState?b.responseXML:"",responseText:4==b.readyState?b.responseText:"",readyState:b.readyState,responseHeaders:4==b.readyState?b.getAllResponseHeaders():"",status:4==b.readyState?b.status:0,statusText:4==b.readyState?b.statusText:"",finalUrl:4==b.readyState?b.finalUrl:""};a.onreadystatechange&&a.onreadystatechange(c),4==b.readyState&&(a.onload&&b.status>=200&&b.status<300&&a.onload(c),a.onerror&&(b.status<200||b.status>=300)&&a.onerror(c))};try{b.open(a.method,a.url)}catch(c){return void(a.onerror&&a.onerror({responseXML:"",responseText:"",readyState:4,responseHeaders:"",status:403,statusText:"Forbidden"}))}if(a.headers)for(var d in a.headers)b.setRequestHeader(d,a.headers[d]);b.send("undefined"!=typeof a.data?a.data:null)}function u(a,b,c,d){for(key in a)if(a.hasOwnProperty(key))if("obj"==typeof a[key])u(a[key]);else if("string"==typeof a[key]&&0===a[key].indexOf("@/(message.callback)/")){var e=a[key].split("@/(message.callback)/")[1];a[key]=f(null,b,e,c,d)}}function v(a,b,c){if("object"!=typeof a)throw new TypeError("Unsupported type for obj.");if("object"!=typeof b)throw new TypeError("Unsupported type for defaults.");for(var d in b)b.hasOwnProperty(d)&&("object"==typeof a[d]&&"object"==typeof b[d]&&c?v(a[d],b[d],c):a.hasOwnProperty(d)||(a[d]=b[d]));return a}function w(a,b){for(var c=0,d=b.length;d>c;c++)if(b[c]===a)return!0;return!1}function x(a){return a&&a.className?a.className.split(" "):[]}function y(a,b){for(var c=x(a),d=b.split(" "),e=0,f=d.length;f>e;e++)w(d[e],c)||(a.className+=" "+d[e]);return a.className}function z(a,b){for(var c=x(a),d=b.split(" "),e=[],f=0,g=c.length;g>f;f++)w(c[f],d)||e.push(c[f]);return a.className=e.join(" ")}function A(a,b){return w(b,x(a))}function B(a,b,c){function d(){i=c.leading===!1?0:new Date,h=null,g=a.apply(e,f)}var e,f,g,h=null,i=0;return c=c||{},function(){var j,k=new Date;return e=this,f=arguments,i||c.leading!==!1||(i=k),j=b-(k-i),0>=j?(clearTimeout(h),h=null,i=k,g=a.apply(e,f)):h||c.trailing===!1||(h=setTimeout(d,j)),g}}function C(a){return JSON.parse(JSON.stringify(a))}function D(a){for(var b=[],c=0,d=a.length;d>c;c++)w(b,a[c])||b.push(a[c]);return b}function E(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function F(a,b){b=b||"text/plain";for(var c=512,d=a.length,e=Math.ceil(d/c),f=new Array(e),g=0;e>g;++g){for(var h=g*c,i=Math.min(h+c,d),j=new Array(i-h),k=h,l=0;i>k;++l,++k)j[l]=a[k].charCodeAt(0);f[g]=new Uint8Array(j)}return new Blob(f,{type:b})}function G(c){if(a.createObjectURL)return a.webkitURL?b.webkitURL.createObjectURL(c):b.URL.createObjectURL(c);throw"createObjectURL is not supported by the browser!"}function H(c){if(a.revokeObjectURL)return a.webkitURL?b.webkitURL.revokeObjectURL(c):b.URL.revokeObjectURL(c);throw"revokeObjectURL is not supported by the browser!"}function I(a,b){return Math.floor(Math.random()*(b-a))+a}function J(a,b){"string"!=typeof a&&(a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-_"),"number"!=typeof b&&(b=64);for(var c=a.length,d="",e=0;b>e;e++)d+=a[I(0,c)];return d}var K=function(){for(var a=3,b=document.createElement("b"),c=b.all||[];b.innerHTML="<!--[if gt IE "+ ++a+"]><i><![endif]-->",c[0];);return a>4?a:!!document.documentMode}(),L=Date.now||function(){return+new Date};return{hasClass:A,removeClass:z,addClass:y,each:c,isArray:d,inArray:w,bind:f,asyncCall:e,defineLockedProperty:j,ie:K,addEventListener:k,removeEventListener:l,now:L,trimLeft:g,trimRight:h,map:i,setCookie:m,getCookie:n,getCookies:o,endsWith:p,inject:q,isJSONString:s,xhr:t,buildArgumentList:r,bindFunctionCallbacks:u,extend:v,throttle:B,clone:C,removeDuplicates:D,escapeRegExp:E,toBlob:F,createObjectURL:G,revokeObjectURL:H,generateToken:J}}),d("storage/localStorage",["utils"],function(a){function b(b,c,d){var e=localStorage.getItem(b);d?c(e):a.asyncCall(null,c,e)}return{setItem:a.bind(localStorage,localStorage.setItem),getItem:b,removeItem:a.bind(localStorage,localStorage.removeItem)}}),d("storage/cookies",["utils"],function(a){function b(b,c){a.setCookie(e+b,c,null,"/",864e8)}function c(b,c,d){var f=a.getCookie(e+b);d?c(f):a.asyncCall(null,c,f)}function d(b){a.setCookie(e+b,"",null,"/",0)}var e="ytcenter.";return{setItem:b,getItem:c,removeItem:d}}),d("console",["utils"],function(a){function b(){return f?console.log.bind(console,"userscript["+e+"]"):function(){}}function c(){return f?console.error.bind(console,"userscript["+e+"]"):function(){}}function d(){return f?console.warn.bind(console,"userscript["+e+"]"):function(){}}var e=a.generateToken(null,8),f=!0,g={};return a.defineLockedProperty(g,"log",function(){},b),a.defineLockedProperty(g,"error",function(){},c),a.defineLockedProperty(g,"warn",function(){},d),g}),d("storage/browser",["support","storage/localStorage","storage/cookies","console"],function(a,b,c){return a.localStorage?b:c}),d("storage/userscript",["support","storage/browser","utils"],function(a,b,c){function d(a,b){GM_setValue(a,b)}function e(a,b,d){var e=GM_getValue(a);d?b(e):c.asyncCall(null,b,e)}function f(a){GM_deleteValue(a)}return a.Greasemonkey?{setItem:d,removeItem:f,getItem:e}:b}),d("storage",["storage/userscript","utils"],function(a,b){function c(b,c){g[b]=c,a.setItem(b,c)}function d(b){delete g[b],a.removeItem(b)}function e(a,b,c){g[b]=c,a(g[b])}function f(c,d,f){c in g?f?d(g[c]):b.asyncCall(null,d,g[c]):a.getItem(c,b.bind(null,e,d,c))}var g={};return{setItem:c,removeItem:d,getItem:f}}),d("UserProxy/utils",[],function(){function a(a,b){var c=Array.prototype.slice.call(arguments,2);return function(){return b.apply(a,c.concat(Array.prototype.slice.call(arguments)))}}function b(a,b){if(d(a))for(var c=0;c<a.length&&b(c,a[c])!==!0;c++);else for(var e in a)if(a.hasOwnProperty(e)&&b(e,a[e])===!0)break}function c(a){var c=[];return b(a,function(a){c.push(a)}),c}function d(a){return"[object Array]"===Object.prototype.toString.call(a)}function e(a,b){for(var c=0,d=b.length;d>c;c++)if(b[c]===a)return!0;return!1}function f(a,b){for(var c=0,d=b.length;d>c;c++)if(b[c]===a)return c;return-1}function g(a,b){return d(a,b)?f(a,b):void 0}function h(a,b){return Math.random()*(b-a)+a}function i(a,b){return Math.floor(Math.random()*(b-a))+a}function j(a,b){"string"!=typeof a&&(a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-_"),"number"!=typeof b&&(b=64);for(var c=a.length,d="",e=0;b>e;e++)d+=a[i(0,c)];return d}function k(a,b){for(a=a.replace(/[^0-9a-zA-Z_\$]/g,"");/$[0-9]/g.test(a);){if(""===a)return b;a=a.substring(1)}return a}function l(a){for(var b=[],c=Array.prototype.slice.call(arguments,1),d=0,e=c.length;e>d;d++)b.push("string"==typeof c[d]?'"'+c[d].replace(/\\/,"\\\\").replace(/"/g,'\\"')+'"':"object"==typeof c[d]?JSON.stringify(c[d]):c[d]);return a?"("+b.join(",")+")":b.join(",")}return{bind:a,each:b,getKeys:c,isArray:d,inArray:e,indexOf:g,indexOfArray:f,getRandomArbitrary:h,getRandomInt:i,generateToken:j,escapeECMAVariable:k,buildArgumentList:l}}),d("UserProxy/CustomEvent",["./utils"],function(a){function b(b,c){g[b]||(g[b]=[],h[b]=a.bind(null,d,b,g[b]),window.addEventListener(b,h[b],!1)),g[b].push(c)}function c(a,b){if(a in g){for(var c=0,d=g[a].length;d>c;c++)g[a][c]===b&&(g[a].splice(c,1),c--,d--);0===g[a].length&&(window.removeEventListener(a,h[a],!1),g[a]=null,h[a]=null)}}function d(a,b,c){c=c||window.event;var d=JSON.parse(c.detail);if("object"==typeof d.detail&&d.token!==f){for(var e=d.detail,g=0,h=b.length;h>g;g++)b[g](e);c&&"function"==typeof c.stopPropagation&&c.stopPropagation()}}function e(a,b){var c=document.createEvent("CustomEvent");c.initCustomEvent(a,!0,!0,JSON.stringify({detail:b,token:f})),document.documentElement.dispatchEvent(c)}var f=a.generateToken(),g={},h={};return{addEventListener:b,removeEventListener:c,fireEvent:e}}),d("UserProxy/Message",["./utils"],function(a){function b(b,c){e(),h[b]||(h[b]=[]);var d=a.bind(null,c,b);h[b].push(d)}function c(a,b){window.postMessage(JSON.stringify({token:g,event:a,detail:b}),"*")}function d(b){b=b||window.event;var c=JSON.parse(b.data);if("string"==typeof c.event&&"object"==typeof c.detail&&c.token!==g&&a.isArray(h[c.event])){for(var d=h[c.event],e=c.detail,f=0,i=d.length;i>f;f++)d(e);b&&"function"==typeof b.stopPropagation&&b.stopPropagation()
}}function e(){f||window.addEventListener("message",d,!1)}var f=!1,g=a.generateToken(),h={};return{addEventListener:b,fireEvent:c}}),d("UserProxy/support",[],function(){function a(){try{var a=document.createEvent("CustomEvent");return a&&"function"==typeof a.initCustomEvent?(a.initCustomEvent(b,!0,!0,{mod:b}),!0):!1}catch(a){return!1}}var b="support.test";return{CustomEvent:a}}),d("UserProxy/memFunction",["./utils","./CustomEvent","./Message","./support"],function(a,b,c,d){function e(b,c,d){if("object"==typeof b)a.each(b,function(a,g){if("object"==typeof g)b[a]=e(g,c,d);else if("string"==typeof g)b[a]=f(g);else if("function"==typeof g){var h=k.push(g)-1;b[a]="${"+c+"/"+d+"/"+h+"}"}});else if("string"==typeof value)b=f(b);else if("function"==typeof b){var g=k.push(b)-1;b="${"+c+"/"+d+"/"+g+"}"}return b}function f(a){return/^\$[\\]*\{([0-9a-zA-Z\.\-_\/\\]+)\}$/g.test(a)?"$\\"+a.substring(1):a}function g(b,c,d){if(/^\$\{([0-9a-zA-Z\.\-_]+)\/([0-9a-zA-Z\.\-_]+)\/([0-9]+)\}$/g.test(b)){var e=b.substring(2,b.length-1).split("/"),f=parseInt(e[2],10);return e[0]===c&&e[1]===d?k[f]:a.bind(null,i,e[0]+"-"+e[1],f)}return/^\$[\\]+\{([0-9a-zA-Z\.\-_\/\\]+)\}$/g.test(b)?"$"+b.substring(2):b}function h(b,c,d){if("object"==typeof b)a.each(b,function(a,e){if("object"==typeof e)b[a]=h(e,c,d);else if("string"==typeof e)b[a]=g(e,c,d);else if("function"==typeof e)throw Error("Function was found!")});else{if("string"==typeof value)return g(value,c,d);if("function"==typeof value)throw Error("Function was found!")}return b}function i(a,e){var f=Array.prototype.slice.call(arguments,2);return d.CustomEvent?b.fireEvent(a,{callbackId:e,args:f,mem:!0}):c.fireEvent(a,{callbackId:e,args:f,mem:!0})}function j(a){return k[a]}var k=[];return{parseObject:e,restoreObject:h,getCacheFunction:j}}),d("UserProxy/Connection",["./CustomEvent","./Message","./utils","./support","./memFunction"],function(a,b,c,d,e){function f(a,b,d,e){setTimeout(c.bind(null,g,a,b,d,e),4)}function g(f,g,h,i){var j=c.getKeys(f),k=c.indexOfArray(i.method,j);if(!(k>-1))throw"Method "+i.method+" has not been set!";var l=f[j[k]].apply(null,e.restoreObject(i.args,g,h));if("number"==typeof i.id){var m=e.parseObject(l,g,h),i={callbackId:i.id,args:[m]};d.CustomEvent?a.fireEvent(g+"-page",i):b.addEventListener(g+"-page",i)}}function h(a){this.token=c.generateToken(),this.functions={},this.namespace="UserProxy",this.pageProxy=a}return h.prototype.setFunctions=function(a){this.functions=a},h.prototype.setNamespace=function(a){this.namespace=a},h.prototype.inject=function(a){var b=document.body||document.head||document.documentElement;if(!b)throw"Parent was not found!";var d=document.createElement("script");d.setAttribute("type","text/javascript"),this.connect(),d.appendChild(document.createTextNode("("+a+")("+c.buildArgumentList.apply(null,[!1,this.token,c.getKeys(this.functions)].concat(Array.prototype.slice.call(arguments,1)))+");")),b.appendChild(d),b.removeChild(d)},h.prototype.connect=function(){this.establishedConnectionListener&&this.disconnect(),this.establishedConnectionListener=c.bind(null,f,this.functions,this.token,"content"),d.CustomEvent?a.addEventListener(this.token+"-content",this.establishedConnectionListener):b.addEventListener(this.token+"-content",this.establishedConnectionListener)},h.prototype.disconnect=function(){this.establishedConnectionListener&&(d.CustomEvent?a.removeEventListener(this.token+"-content",this.establishedConnectionListener):b.removeEventListener(this.token+"-content",this.establishedConnectionListener),this.establishedConnectionListener=null)},h}),d("extensions-connection/userscript",[],function(){function a(){}return{setPageConnection:a}}),d("xhr/browser",[],function(){function a(a){var b;"undefined"!=typeof XMLHttpRequest?b=new XMLHttpRequest:a.onerror(responseState),b.onreadystatechange=function(){var c={responseXML:"",responseText:4==b.readyState?b.responseText:"",readyState:b.readyState,responseHeaders:4==b.readyState?b.getAllResponseHeaders():"",status:4==b.readyState?b.status:0,statusText:4==b.readyState?b.statusText:"",finalUrl:4==b.readyState?b.finalUrl:""};a.onreadystatechange&&a.onreadystatechange(c),4==b.readyState&&(a.onload&&b.status>=200&&b.status<300&&a.onload(c),a.onerror&&(b.status<200||b.status>=300)&&a.onerror(c))};try{b.open(a.method,a.url)}catch(c){a.onerror()}if(a.headers)for(var d in a.headers)b.setRequestHeader(d,a.headers[d]);b.send("undefined"!=typeof a.data?a.data:null)}return a}),d("xhr/userscript",["support","xhr/browser"],function(a,b){return a.Greasemonkey?GM_xmlhttpRequest:b}),d("xhr",["xhr/userscript"],function(a){return a}),d("main-wrapper",["storage","UserProxy/Connection","extensions-connection/userscript","xhr"],function(b,c,d,e){var f={setItem:b.setItem,getItem:b.getItem,removeItem:b.removeItem,xhr:e},g=null;b.getItem("YouTubeCenterSettings",function(b){"string"==typeof b&&(b=JSON.parse(b||"{}")),g=new c,g.setFunctions(f),d.setPageConnection(g),g.inject(a,b)},!0)}),c(["main-wrapper"])}()}();